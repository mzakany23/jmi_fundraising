"use strict";define("testing-auth0/app",["exports","ember","ember/resolver","ember/load-initializers","testing-auth0/config/environment"],function(e,t,n,a,i){var r;t["default"].MODEL_FACTORY_INJECTIONS=!0,r=t["default"].Application.extend({modulePrefix:i["default"].modulePrefix,podModulePrefix:i["default"].podModulePrefix,Resolver:n["default"]}),a["default"](r,i["default"].modulePrefix),e["default"]=r}),define("testing-auth0/controllers/array",["exports","ember"],function(e,t){e["default"]=t["default"].Controller}),define("testing-auth0/controllers/index",["exports","ember"],function(e,t){e["default"]=t["default"].Controller.extend({signUpSuccess:!1})}),define("testing-auth0/controllers/object",["exports","ember"],function(e,t){e["default"]=t["default"].Controller}),define("testing-auth0/initializers/export-application-global",["exports","ember","testing-auth0/config/environment"],function(e,t,n){function a(){var e=arguments[1]||arguments[0];if(n["default"].exportApplicationGlobal!==!1){var a,i=n["default"].exportApplicationGlobal;a="string"==typeof i?i:t["default"].String.classify(n["default"].modulePrefix),window[a]||(window[a]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete window[a]}}))}}e.initialize=a,e["default"]={name:"export-application-global",initialize:a}}),define("testing-auth0/instance-initializers/app-version",["exports","testing-auth0/config/environment","ember"],function(e,t,n){var a=n["default"].String.classify,i=!1;e["default"]={name:"App Version",initialize:function(e){if(!i){var r=a(e.toString());n["default"].libraries.register(r,t["default"].APP.version),i=!0}}}}),define("testing-auth0/router",["exports","ember","testing-auth0/config/environment"],function(e,t,n){var a=t["default"].Router.extend({location:n["default"].locationType});a.map(function(){}),a.reopen({rootURL:"/dashboard/"}),e["default"]=a}),define("testing-auth0/routes/application",["exports","ember"],function(e,t){e["default"]=t["default"].Route.extend({setupController:function(e,t){sessionStorage.getItem("email")}})}),define("testing-auth0/routes/index",["exports","ember","ember-ajax/errors"],function(e,t,n){e["default"]=t["default"].Route.extend({session:t["default"].inject.service(),ajax:t["default"].inject.service(),beforeModel:function(){var e=this,t=this.get("session").tokenValid();t&&t.then(function(t){t&&e.initializeSession()})},initializeSession:function(){this.controller.set("isAuthenticated",!0),this.controller.set("currentUser",sessionStorage.getItem("email"))},actions:{login:function(){this.get("session").validateSession().then(function(e){e&&location.reload()})},logout:function(){this.get("session").invalidateSession(),this.controller.set("isAuthenticated",!1)},signUp:function(){this.get("session").createAccount().then(function(e){console.log(e),1==e&&this.controller.set("signUpSuccess",!0)})},getDecodedPayload:function(){var e=this.get("session").tokenValid();return e?e.then(function(e){console.log(e)}):void 0},getProfiles:function(){this.get("ajax").request("profiles")["catch"](function(e){e instanceof n.ForbiddenError&&console.log(e)}).then(function(e){console.log(e)})}}})}),define("testing-auth0/services/ajax",["exports","ember","ember-ajax/services/ajax"],function(e,t,n){e["default"]=n["default"].extend({host:"http://localhost:8000/api",session:t["default"].inject.service(),headers:t["default"].computed("session.authToken",{get:function(){var e={},t=this.get("session.authToken");return t&&(e["auth-token"]=t),e}})})}),define("testing-auth0/services/session",["exports","ember"],function(e,t){e["default"]=t["default"].Service.extend({ajax:t["default"].inject.service(),isAuthenticated:!1,userEmail:null,authToken:sessionStorage.getItem("auth-token"),tokenValid:function(){var e=this;if(sessionStorage["auth-token"]){var n=sessionStorage.getItem("auth-token");return new t["default"].RSVP.Promise(function(t,a){e.get("ajax").post("verify-token/",{data:{token:n}}).then(function(e){var n=JSON.parse(e).exp,i=(new Date).getTime()/1e3,r=n-i,o=r>=0;o&&t(!0),a()})})}},validateSession:function(){var e=this,n=new Auth0Lock("bcqJpmuNQuBURnQJm9ZFe0cqtXRUU4lF","jmismain.auth0.com");return new t["default"].RSVP.Promise(function(t,a){n.show(function(n,a,i){if(n)return alert(n.message);var r=i;this.ajax;sessionStorage.clear(),e.set("isAuthenticated",!0),e.set("user",a.email),sessionStorage.setItem("auth-token",r),sessionStorage.setItem("email",a.email),t(e.get("isAuthenticated"))})})},createAccount:function(){var e=this,t=new Auth0Lock("bcqJpmuNQuBURnQJm9ZFe0cqtXRUU4lF","jmismain.auth0.com");t.showSignup(function(t,n,a){if(n&&a){sessionStorage.setItem("auth-token",a);var i=n.email;return e.get("ajax").post("profiles/create/",{data:{token:a,email:i}}).then(function(e){console.log(e)}),!0}})},invalidateSession:function(){this.set("isAuthenticated",!1),this.set("userEmail",null),sessionStorage.clear(),location.reload()}})}),define("testing-auth0/templates/application",["exports"],function(e){e["default"]=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@1.13.6",loc:{source:null,start:{line:1,column:0},end:{line:3,column:0}},moduleName:"testing-auth0/templates/application.hbs"},arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var t=e.createDocumentFragment(),n=e.createComment("");e.appendChild(t,n);var n=e.createTextNode("\n");e.appendChild(t,n);var n=e.createComment("");e.appendChild(t,n);var n=e.createTextNode("\n");return e.appendChild(t,n),t},buildRenderNodes:function(e,t,n){var a=new Array(2);return a[0]=e.createMorphAt(t,0,0,n),a[1]=e.createMorphAt(t,2,2,n),e.insertBoundary(t,0),a},statements:[["content","mike",["loc",[null,[1,0],[1,8]]]],["content","outlet",["loc",[null,[2,0],[2,10]]]]],locals:[],templates:[]}}())}),define("testing-auth0/templates/index",["exports"],function(e){e["default"]=Ember.HTMLBars.template(function(){var e=function(){return{meta:{revision:"Ember@1.13.6",loc:{source:null,start:{line:1,column:0},end:{line:6,column:0}},moduleName:"testing-auth0/templates/index.hbs"},arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var t=e.createDocumentFragment(),n=e.createTextNode("	");e.appendChild(t,n);var n=e.createElement("div");e.setAttribute(n,"class","alert alert-success alert-dismissible"),e.setAttribute(n,"role","alert");var a=e.createTextNode("\n	  ");e.appendChild(n,a);var a=e.createElement("button");e.setAttribute(a,"type","button"),e.setAttribute(a,"class","close"),e.setAttribute(a,"data-dismiss","alert"),e.setAttribute(a,"aria-label","Close");var i=e.createElement("span");e.setAttribute(i,"aria-hidden","true");var r=e.createTextNode("Ã—");e.appendChild(i,r),e.appendChild(a,i),e.appendChild(n,a);var a=e.createTextNode("\n	  You successfully signed up!\n	");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");return e.appendChild(t,n),t},buildRenderNodes:function(){return[]},statements:[],locals:[],templates:[]}}(),t=function(){return{meta:{revision:"Ember@1.13.6",loc:{source:null,start:{line:8,column:0},end:{line:11,column:0}},moduleName:"testing-auth0/templates/index.hbs"},arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var t=e.createDocumentFragment(),n=e.createTextNode("	");e.appendChild(t,n);var n=e.createElement("h1"),a=e.createTextNode("current user: ");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n	");e.appendChild(t,n);var n=e.createElement("hr");e.appendChild(t,n);var n=e.createTextNode("\n");return e.appendChild(t,n),t},buildRenderNodes:function(e,t,n){var a=new Array(1);return a[0]=e.createMorphAt(e.childAt(t,[1]),1,1),a},statements:[["content","currentUser",["loc",[null,[9,19],[9,34]]]]],locals:[],templates:[]}}();return{meta:{revision:"Ember@1.13.6",loc:{source:null,start:{line:1,column:0},end:{line:22,column:0}},moduleName:"testing-auth0/templates/index.hbs"},arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var t=e.createDocumentFragment(),n=e.createComment("");e.appendChild(t,n);var n=e.createTextNode("\n");e.appendChild(t,n);var n=e.createComment("");e.appendChild(t,n);var n=e.createTextNode("\n");e.appendChild(t,n);var n=e.createElement("button");e.setAttribute(n,"class","btn btn-danger");var a=e.createTextNode("login");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");e.appendChild(t,n);var n=e.createElement("button");e.setAttribute(n,"class","btn btn-primary");var a=e.createTextNode("logout");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");e.appendChild(t,n);var n=e.createElement("button");e.setAttribute(n,"class","btn btn-warning");var a=e.createTextNode("Sign Up");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");e.appendChild(t,n);var n=e.createElement("button");e.setAttribute(n,"class","btn btn-info");var a=e.createTextNode("valid?");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");e.appendChild(t,n);var n=e.createElement("hr");e.appendChild(t,n);var n=e.createTextNode("\n\n");e.appendChild(t,n);var n=e.createElement("button");e.setAttribute(n,"class","btn btn-danger");var a=e.createTextNode("make request");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n\n\n");return e.appendChild(t,n),t},buildRenderNodes:function(e,t,n){var a=e.childAt(t,[4]),i=e.childAt(t,[6]),r=e.childAt(t,[8]),o=e.childAt(t,[10]),l=e.childAt(t,[14]),s=new Array(7);return s[0]=e.createMorphAt(t,0,0,n),s[1]=e.createMorphAt(t,2,2,n),s[2]=e.createElementMorph(a),s[3]=e.createElementMorph(i),s[4]=e.createElementMorph(r),s[5]=e.createElementMorph(o),s[6]=e.createElementMorph(l),e.insertBoundary(t,0),s},statements:[["block","if",[["get","signUpSuccess",["loc",[null,[1,6],[1,19]]]]],[],0,null,["loc",[null,[1,0],[6,7]]]],["block","if",[["get","isAuthenticated",["loc",[null,[8,6],[8,21]]]]],[],1,null,["loc",[null,[8,0],[11,7]]]],["element","action",["login"],[],["loc",[null,[13,8],[13,26]]]],["element","action",["logout"],[],["loc",[null,[14,8],[14,27]]]],["element","action",["signUp"],[],["loc",[null,[15,8],[15,27]]]],["element","action",["getDecodedPayload"],[],["loc",[null,[16,8],[16,38]]]],["element","action",["getProfiles"],[],["loc",[null,[19,8],[19,32]]]]],locals:[],templates:[e,t]}}())}),define("testing-auth0/config/environment",["ember"],function(e){var t="testing-auth0";try{var n=t+"/config/environment",a=e["default"].$('meta[name="'+n+'"]').attr("content"),i=JSON.parse(unescape(a));return{"default":i}}catch(r){throw new Error('Could not read config from meta tag with name "'+n+'".')}}),runningTests?require("testing-auth0/tests/test-helper"):require("testing-auth0/app")["default"].create({name:"testing-auth0",version:"0.0.0+"});